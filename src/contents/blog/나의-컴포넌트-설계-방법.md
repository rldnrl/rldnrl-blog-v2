---
title: 나의 컴포넌트 설계 방법
date: '2022-02-17'
tags: ['React', 'TypeScript']
draft: false
summary: 저만의 컴포넌트 설계 방법에 대해서 나눠보겠습니다.
---

## 1. 공통적으로 관리할 수 있는 것 관리하기

저는 기획과 디자인을 보면서 디자인적으로 공통적인 것들을 공통 컴포넌트로 만듭니다. 그리고 디자인이 비슷해보여도 다른 기능을 갖고 있는 컴포넌트는 공통 컴포넌트에서 과감히 제외합니다. 이것은 하나의 컴포넌트에 많은 역할을 부여하지 않기 위함입니다.

## 2. 역할 정의. 그리고 Props 먼저 설계하기

저는 React와 TypeScript 조합을 너무 좋아합니다. Props를 먼저 설계할 수 있기 때문이죠. 먼저 이 컴포넌트의 역할을 정의한 다음에, Props를 설계합니다. 컴포넌트의 역할을 정의하면 어떤 Props를 넣어야할지 자연스럽게 떠오르고, Props를 먼저 설계하면 로직이 나름대로 그려지기 때문입니다. 그리고 다른 사람이 작성한 코드를 봤을 때 Props만 봐도 역할이 어느 정도 이해가 됩니다. 저는 이것을 타입 주도 개발이라고 부르고 싶네요.

## 3. 로직 구현하기

이제 실제로 Props를 정의했다면, 로직을 구현합니다. 타이핑을 꼼꼼하게 하면서 역할에 맡게 로직을 구현합니다.

## 4. 1-2주일에 한 번은 리팩토링하기

저는 1주일에 한 번 리팩토링 합니다. 1-2주일에 한 번은 제 코드를 점검합니다. 아래는 저의 점검 목록입니다.

1. 더 효율적으로 짤 수 없는지
2. 가독성 좋게 짤 수 없는지
3. 역할을 과하게 부여하지 않았는지
4. 반복되는 코드는 없는지
5. 적절한 타입이 사용되었는지

## 5. 성급한 추상화 하지 않기

저는 성급한 추상화를 안 좋아합니다. 추상화를 미리하고 적용시키는 것이 의존성을 높입니다. 예를 들어 `Input` 컴포넌트가 있다고 가정해봅시다. `Input` 컴포넌트를 미리 추상화시키고 여기저기 쓰고 있습니다. 기존의 `Input`과 다른 역할을 하는 컴포넌트가 등장해서 Props를 바꿔야하는 상황이 왔고, Props를 변경을 했습니다. 자, 그러면 어떤 상황이 펼쳐질지 상상이 되시나요? 여기저기서 빨간줄이 뜰 겁니다. Props가 바뀌면 `Input`을 적용하고 있는 모든 컴포넌트에 대응해줘야하기 때문이죠. 컴포넌트는 디자인 시스템에 위임하는 것이 좋다고 생각합니다.

## 6. Props Drilling을 피하기 위해 Redux 사용하지 않기

외국에 많은 개발자들이 Props Drilling을 피하기 위해서 Redux를 사용한다는 얘기를 들었습니다. 하지만 저는 그 얘기를 듣고 "왜 Redux를 쓰는 거지?"라고 생각을 했습니다. Redux는 Global State를 관리하기 위해서 나온 라이브러리 입니다. 저는 만약 Props Drilling을 피하는 방법이라면 Context API가 적합하다고 생각합니다.

## 7. React Query나 SWR에 Server State 위임하기

예전에는 비동기 로직을 위해서 Redux Middleware를 사용했습니다. 이제는 React Query, SWR이라는 라이브러리가 나와서 비동기 로직을 위임할 수 있습니다. (저는 개인적으로 React Query를 더 좋아합니다.)

## 8. Redux나 Recoil에 Client State 위임하기

React-Query에 Server State를 위임했다면, Client State는 Redux나 Recoil에 위임합니다. 이것도 역할을 분리하는 것에 연장이라고 볼 수 있는데요. 그러면 코드 파악하기가 더 수월해집니다.
